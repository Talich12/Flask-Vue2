"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const s=require("vue"),c=require("@vue-youtube/shared"),S=()=>{const r=s.inject(c.PROVIDE_KEY);if(!r)throw new Error("You may forget to apply app.use(manager). See https://vue-youtube.github.io/docs/usage/manager.html for more information");return r},q=()=>{const g={install(l){l.provide(c.PROVIDE_KEY,g),this._insert()},register(l,i){const n=l.id||`vue-youtube-${this.state.counter++}`,u=this.state.players.get(n);if(u!==void 0){u({factory:this.state.factory,id:n});return}if(this.state.factory!==void 0){i({factory:this.state.factory,id:n});return}this.state.backlog.set(n,i)},_insert(){var n;const l=document.createElement("script");l.src="https://www.youtube.com/player_api";const i=document.querySelectorAll("script")[0];(n=i.parentNode)==null||n.insertBefore(l,i),window.onYouTubeIframeAPIReady=()=>{this.state.factory=window.YT;for(const[u,h]of this.state.backlog.entries())this.state.backlog.delete(u),this.state.players.set(u,h),h({factory:this.state.factory,id:u})}},state:{backlog:new Map,players:new Map,factory:void 0,counter:1}};return g},N=(r,g,l={})=>{const{playerVars:i={},cookie:n=!0,width:u=1280,height:h=720}=l,M=n?c.HOST_COOKIE:c.HOST_NO_COOKIE,O=S(),v=new Array,b=new Array,w=new Array,C=new Array,k=new Array,m=new Array,a=s.shallowRef(),P=s.ref(r),d=s.ref(!1),p=s.ref(!1),y=(e,t)=>{for(const f of t)f(e)},A=(...e)=>{v.push(...e)},E=(...e)=>{b.push(...e)},I=(...e)=>{w.push(...e)},_=(...e)=>{C.push(...e)},R=(...e)=>{k.push(...e)},T=(...e)=>{m.push(...e)},V=()=>{var t,f,o;const e=(t=a.value)==null?void 0:t.getPlayerState();if(e&&e===c.PlayerState.PLAYING){(f=a.value)==null||f.pauseVideo();return}(o=a.value)==null||o.playVideo()},Y=()=>{var e,t;if((e=a.value)!=null&&e.isMuted()){a.value.unMute();return}(t=a.value)==null||t.mute()},j=()=>{var e,t;if(d.value){(e=a.value)==null||e.setShuffle(!1),d.value=!1;return}(t=a.value)==null||t.setShuffle(!0),d.value=!0},K=()=>{var e,t;if(p.value){(e=a.value)==null||e.setLoop(!1),p.value=!1;return}(t=a.value)==null||t.setLoop(!0),p.value=!0},L=s.watch(P,e=>{var t;(t=a.value)==null||t.loadVideoById(e)});return s.onMounted(()=>{const e=c.unrefElement(g);!e||O.register(e,({factory:t,id:f})=>{e.id=f,a.value=new t.Player(f,{videoId:s.unref(P),playerVars:i,height:h,width:u,host:M,events:{onPlaybackQualityChange:o=>{y(o,v)},onPlaybackRateChange:o=>{y(o,b)},onStateChange:o=>{y(o,w)},onApiChange:o=>{y(o,C)},onError:o=>{y(o,k)},onReady:o=>{y(o,m)}}})})}),s.onUnmounted(()=>{var e;(e=a.value)==null||e.destroy(),L()}),{instance:a,togglePlay:V,toggleMute:Y,toggleLoop:K,toggleShuffle:j,onPlaybackQualityChange:A,onPlaybackRateChange:E,onStateChange:I,onApiChange:_,onError:R,onReady:T}};exports.createManager=q;exports.injectManager=S;exports.usePlayer=N;for(const r in c)r!=="default"&&!exports.hasOwnProperty(r)&&Object.defineProperty(exports,r,{enumerable:!0,get:()=>c[r]});
